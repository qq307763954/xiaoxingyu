<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>设备管理 - 小语星</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../../css/custom.css">
    
    <style>
        body {
            background-color: #f8f8f8;
        }
        .device-container {
            max-width: 100%;
            padding: 0 16px;
        }
        .device-header {
            margin-top: 20px;
            margin-bottom: 24px;
            text-align: center;
        }
        .device-card {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            position: relative;
        }
        .device-icon {
            width: 50px;
            height: 50px;
            background-color: #f0f9ff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
        }
        .device-icon i {
            font-size: 24px;
            color: #4A90E2;
        }
        .device-info {
            flex: 1;
        }
        .device-name {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 4px;
        }
        .device-status {
            font-size: 12px;
            color: #9B9B9B;
        }
        .device-status.connected {
            color: #7ED321;
        }
        .device-status.offline {
            color: #9B9B9B;
        }
        .device-status.low-battery {
            color: #F5A623;
        }
        .device-action {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
        }
        .action-btn {
            background-color: transparent;
            border: none;
            color: #4A90E2;
            padding: 8px;
            font-size: 14px;
        }
        .add-device-card {
            background-color: #f0f9ff;
            border: 2px dashed #4A90E2;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            cursor: pointer;
            transition: all 0.3s;
        }
        .add-device-card:hover {
            background-color: #e6f4ff;
        }
        .add-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #4A90E2;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }
        .add-icon i {
            font-size: 24px;
            color: white;
        }
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 16px;
            margin-top: 32px;
        }
        .battery-indicator {
            width: 40px;
            height: 16px;
            background-color: #e0e0e0;
            border-radius: 3px;
            position: relative;
            margin-left: 6px;
            display: inline-block;
            vertical-align: middle;
        }
        .battery-level {
            height: 100%;
            border-radius: 2px;
            position: absolute;
            left: 0;
            top: 0;
        }
        .level-high {
            background-color: #7ED321;
            width: 85%;
        }
        .level-medium {
            background-color: #F5A623;
            width: 45%;
        }
        .level-low {
            background-color: #FF3B30;
            width: 15%;
        }
        .button-row {
            display: flex;
            gap: 8px;
        }
        .button-row button {
            flex: 1;
        }
    </style>
</head>
<body>
    <!-- iOS 状态栏 -->
    <div class="ios-status-bar">
        <div class="flex items-center">
            <span>9:41</span>
        </div>
        <div class="flex items-center space-x-2">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-full"></i>
        </div>
    </div>
    
    <!-- 标题栏 -->
    <div class="title-bar bg-white flex justify-between items-center px-4 py-3 shadow-sm">
        <a href="../main/home.html" class="back-button">
            <i class="fas fa-chevron-left text-blue-500"></i>
        </a>
        <div class="title font-bold">设备管理</div>
        <div class="w-8"></div> <!-- 占位元素，保持标题居中 -->
    </div>
    
    <div class="device-container mx-auto pb-24">
        <div class="device-header">
            <p class="text-gray-500 text-sm">管理您的小语星设备</p>
        </div>
        
        <div class="section-title">当前使用的设备</div>
        
        <!-- 当前连接的设备 -->
        <div class="device-card">
            <div class="device-icon">
                <i class="fas fa-watch"></i>
            </div>
            <div class="device-info">
                <div class="device-name">小语星手环 #1</div>
                <div class="device-status connected">
                    已连接 
                    <span class="text-gray-400">|</span> 
                    电量
                    <div class="battery-indicator">
                        <div class="battery-level level-high"></div>
                    </div>
                </div>
            </div>
            <div class="device-action">
                <button class="action-btn bg-blue-100 px-3 py-2 rounded-lg text-blue-500">
                    正在使用
                </button>
            </div>
        </div>
        
        <div class="section-title">其他设备</div>
        
        <!-- 其他已添加设备 -->
        <div class="device-card">
            <div class="device-icon">
                <i class="fas fa-watch"></i>
            </div>
            <div class="device-info">
                <div class="device-name">小语星手环 #2</div>
                <div class="device-status low-battery">
                    已连接 
                    <span class="text-gray-400">|</span> 
                    电量低
                    <div class="battery-indicator">
                        <div class="battery-level level-low"></div>
                    </div>
                </div>
            </div>
            <div class="device-action button-row">
                <button class="action-btn bg-gray-100 px-3 py-2 rounded-lg text-gray-600">
                    <i class="fas fa-exchange-alt mr-1"></i> 切换
                </button>
            </div>
        </div>
        
        <div class="device-card">
            <div class="device-icon">
                <i class="fas fa-watch"></i>
            </div>
            <div class="device-info">
                <div class="device-name">小语星手环 #3</div>
                <div class="device-status offline">
                    离线
                    <span class="text-gray-400 ml-1">最后连接: 昨天</span> 
                </div>
            </div>
            <div class="device-action button-row">
                <button class="action-btn bg-gray-100 px-2 py-2 rounded-lg text-gray-600 text-xs">
                    <i class="fas fa-trash-alt mr-1"></i> 删除
                </button>
                <button class="action-btn bg-gray-100 px-2 py-2 rounded-lg text-gray-600 text-xs">
                    <i class="fas fa-redo mr-1"></i> 刷新
                </button>
            </div>
        </div>
        
        <!-- 添加新设备卡片 -->
        <a href="../device/pairing.html" class="add-device-card">
            <div class="add-icon">
                <i class="fas fa-plus"></i>
            </div>
            <div class="text-base font-medium text-blue-500">添加新设备</div>
            <div class="text-xs text-gray-500 mt-1">连接新的小语星设备</div>
        </a>
        
        <!-- 设备管理提示 -->
        <div class="bg-blue-50 p-4 rounded-lg mt-6">
            <h3 class="text-blue-600 font-medium mb-2 text-sm flex items-center">
                <i class="fas fa-info-circle mr-2"></i> 提示
            </h3>
            <p class="text-gray-600 text-xs leading-relaxed">
                设备会自动同步数据到云端，确保您的手机蓝牙已开启并保持在设备附近可获得最佳体验。电量低于20%时，请及时充电以避免数据丢失。
            </p>
        </div>
    </div>
    
    <script>
        // 显示当前时间
        function updateTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.querySelector('.time').textContent = `${hours}:${minutes}`;
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // 更新状态栏时间
            updateTime();
            setInterval(updateTime, 60000); // 每分钟更新一次
            
            // 设备切换按钮
            const switchButtons = document.querySelectorAll('.device-action .action-btn:not(:contains("删除")):not(:contains("刷新"))');
            switchButtons.forEach(button => {
                button.addEventListener('click', function() {
                    if (this.textContent.trim() !== '正在使用') {
                        alert('正在切换到该设备...');
                        
                        // 更新按钮状态
                        document.querySelectorAll('.device-action .action-btn').forEach(btn => {
                            if (btn.textContent.trim() === '正在使用') {
                                btn.textContent = '切换';
                                btn.classList.remove('bg-blue-100', 'text-blue-500');
                                btn.classList.add('bg-gray-100', 'text-gray-600');
                            }
                        });
                        
                        this.textContent = '正在使用';
                        this.classList.remove('bg-gray-100', 'text-gray-600');
                        this.classList.add('bg-blue-100', 'text-blue-500');
                    }
                });
            });
            
            // 删除设备按钮
            const deleteButtons = document.querySelectorAll('.device-action .action-btn:contains("删除")');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    if (confirm('确定要删除这个设备吗？删除后需要重新配对才能使用。')) {
                        const deviceCard = this.closest('.device-card');
                        deviceCard.style.opacity = '0.5';
                        
                        setTimeout(() => {
                            deviceCard.remove();
                        }, 500);
                    }
                });
            });
            
            // 刷新设备按钮
            const refreshButtons = document.querySelectorAll('.device-action .action-btn:contains("刷新")');
            refreshButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const deviceStatusEl = this.closest('.device-card').querySelector('.device-status');
                    deviceStatusEl.innerHTML = '<i class="fas fa-sync fa-spin mr-2"></i> 正在刷新...';
                    
                    setTimeout(() => {
                        deviceStatusEl.innerHTML = '已连接 <span class="text-gray-400">|</span> 电量 <div class="battery-indicator"><div class="battery-level level-medium"></div></div>';
                        deviceStatusEl.classList.remove('offline');
                        deviceStatusEl.classList.add('connected');
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>